(()=>{var e={};e.id=888,e.ids=[888],e.modules={2050:(e,t,r)=>{"use strict";r.d(t,{E:()=>o,e:()=>u});var i=r(997),n=r(6689);let l=(0,n.createContext)(null),a=["6e400001-b5a3-f393-e0a9-e50e24dcca9e","0000ffe0-0000-1000-8000-00805f9b34fb","4fafc201-1fb5-459e-8fcc-c5c9c331914b"],s=e=>{if(!e)return!1;let t=e.name||"";return t.trim().length>0&&!t.toLowerCase().includes("unknown")};function u({children:e}){let[t,r]=(0,n.useState)(!0),[u,o]=(0,n.useState)(!0),[c,d]=(0,n.useState)(!1),[f,h]=(0,n.useState)(null),[m,v]=(0,n.useState)(!1),[g,w]=(0,n.useState)(null),S=(0,n.useRef)(null),[b,p]=(0,n.useState)(null),[x,y]=(0,n.useState)(!1),[P,q]=(0,n.useState)([]),[C,j]=(0,n.useState)(null),D=async()=>{if(!navigator.bluetooth){r(!1);return}if(!t){alert("Bluetooth appears to be off on this device. Please enable Bluetooth and try scanning again.");return}y(!0),q([]),p(null);try{let e=await navigator.bluetooth.requestDevice({filters:[{name:"AppLift_IMU"}],optionalServices:a});e&&s(e)?q(t=>t.some(t=>t.id===e.id)?t:[e,...t]):e&&!s(e)&&p("Device has no name or is unknown. Please select a device with a valid name.")}catch(e){p(e.message),"NotAllowedError"===e.name&&o(!1)}finally{y(!1)}},I=async e=>{if(e)try{if(p(null),o(!0),d(!0),h(e.id??null),e.gatt&&"function"==typeof e.gatt.connect){let t=await e.gatt.connect();if(e.addEventListener("gattserverdisconnected",()=>{v(!1),w(null),S.current=null;try{window.localStorage.removeItem("bleDevice")}catch(e){}}),t&&t.connected){w(e),S.current=e,v(!0);try{let t={id:e.id,name:e.name};window.localStorage.setItem("bleDevice",JSON.stringify(t))}catch(e){}try{let t=e.name??e.id??"device";j(`Paired with ${t}`),setTimeout(()=>j(null),4e3)}catch(e){}(async()=>{for(let e of a)try{if(await t.getPrimaryService(e)){console.log("Found BLE service on device:",e);break}}catch(e){}})()}else v(!1)}else{w(e),v(!0);try{let t={id:e.id,name:e.name};window.localStorage.setItem("bleDevice",JSON.stringify(t))}catch(e){}try{let t=e.name??e.id??"device";j(`Paired with ${t}`),setTimeout(()=>j(null),4e3)}catch(e){}}}catch(e){p(e.message??String(e)),v(!1)}finally{d(!1),h(null)}},A=()=>{let e=S.current||g;if(e)try{e.gatt&&e.gatt.connected&&e.gatt.disconnect()}catch(e){console.error("Disconnect error:",e)}S.current=null,w(null),v(!1),q(t=>t.filter(t=>t.id!==e?.id));try{window.localStorage.removeItem("bleDevice")}catch(e){}},E=(0,n.useMemo)(()=>({availability:t,permissionGranted:u,connecting:c,connectingDeviceId:f,connected:m,device:g,devicesFound:P,error:b,scanning:x,pairMessage:C,scanDevices:D,connectToDevice:I,disconnect:A,setPairMessage:j}),[t,u,c,f,m,g,P,b,x,C]);return i.jsx(l.Provider,{value:E,children:e})}function o(){let e=(0,n.useContext)(l);if(!e)throw Error("useBluetooth must be used within BluetoothProvider");return e}},3414:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var i=r(997);r(6764);var n=r(6689),l=r(1163),a=r(6879),s=r(2050);let u=function({Component:e,pageProps:t}){(0,l.useRouter)();let[r,u]=(0,n.useState)(null),[o,c]=(0,n.useState)(!1);return i.jsx(s.e,{children:i.jsx(a.X,{children:i.jsx(e,{...t})})})}},6879:(e,t,r)=>{"use strict";r.d(t,{G:()=>u,X:()=>s});var i=r(997),n=r(6689);let l={userId:null,username:"",email:"",authProvider:"email",termsAccepted:!1,termsAcceptedAt:null,gender:"",birthMonth:"",birthYear:"",age:null,height:null,heightUnit:"ft",heightFeet:"",heightInches:"",heightCm:"",weight:null,fitnessLevel:"",fitnessGoal:"",liftingConfidence:"",createdAt:null,onboardingCompleted:!1},a=(0,n.createContext)(null);function s({children:e}){let[t,r]=(0,n.useState)(()=>l),s=e=>{r(t=>({...t,...e}))},u=()=>r(l),o=(0,n.useMemo)(()=>({profile:t,updateProfile:s,resetProfile:u}),[t]);return i.jsx(a.Provider,{value:o,children:e})}function u(){let e=(0,n.useContext)(a);if(!e)throw Error("useUserProfile must be used within UserProfileProvider");return e}},6764:()=>{},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},2048:e=>{"use strict";e.exports=require("fs")},6162:e=>{"use strict";e.exports=require("stream")},1568:e=>{"use strict";e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[567,163],()=>r(3414));module.exports=i})();