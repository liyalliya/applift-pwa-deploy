(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[634],{1252:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/workout-monitor",function(){return s(5267)}])},2602:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{default:function(){return n},noSSR:function(){return l}});let i=s(8754);s(5893),s(7294);let r=i._(s(5491));function a(e){return{default:(null==e?void 0:e.default)||e}}function l(e,t){return delete t.webpack,delete t.modules,e(t)}function n(e,t){let s=r.default,i={loading:e=>{let{error:t,isLoading:s,pastDelay:i}=e;return null}};e instanceof Promise?i.loader=()=>e:"function"==typeof e?i.loader=e:"object"==typeof e&&(i={...i,...e});let n=(i={...i,...t}).loader;return(i.loadableGenerated&&(i={...i,...i.loadableGenerated},delete i.loadableGenerated),"boolean"!=typeof i.ssr||i.ssr)?s({...i,loader:()=>null!=n?n().then(a):Promise.resolve(a(()=>null))}):(delete i.webpack,delete i.modules,l(s,i))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1159:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"LoadableContext",{enumerable:!0,get:function(){return i}});let i=s(8754)._(s(7294)).default.createContext(null)},5491:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return u}});let i=s(8754)._(s(7294)),r=s(1159),a=[],l=[],n=!1;function o(e){let t=e(),s={loading:!0,loaded:null,error:null};return s.promise=t.then(e=>(s.loading=!1,s.loaded=e,e)).catch(e=>{throw s.loading=!1,s.error=e,e}),s}class d{promise(){return this._res.promise}retry(){this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};let{_res:e,_opts:t}=this;e.loading&&("number"==typeof t.delay&&(0===t.delay?this._state.pastDelay=!0:this._delay=setTimeout(()=>{this._update({pastDelay:!0})},t.delay)),"number"==typeof t.timeout&&(this._timeout=setTimeout(()=>{this._update({timedOut:!0})},t.timeout))),this._res.promise.then(()=>{this._update({}),this._clearTimeouts()}).catch(e=>{this._update({}),this._clearTimeouts()}),this._update({})}_update(e){this._state={...this._state,error:this._res.error,loaded:this._res.loaded,loading:this._res.loading,...e},this._callbacks.forEach(e=>e())}_clearTimeouts(){clearTimeout(this._delay),clearTimeout(this._timeout)}getCurrentValue(){return this._state}subscribe(e){return this._callbacks.add(e),()=>{this._callbacks.delete(e)}}constructor(e,t){this._loadFn=e,this._opts=t,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}}function c(e){return function(e,t){let s=Object.assign({loader:null,loading:null,delay:200,timeout:null,webpack:null,modules:null},t),a=null;function o(){if(!a){let t=new d(e,s);a={getCurrentValue:t.getCurrentValue.bind(t),subscribe:t.subscribe.bind(t),retry:t.retry.bind(t),promise:t.promise.bind(t)}}return a.promise()}if(!n){let e=s.webpack?s.webpack():s.modules;e&&l.push(t=>{for(let s of e)if(t.includes(s))return o()})}function c(e,t){!function(){o();let e=i.default.useContext(r.LoadableContext);e&&Array.isArray(s.modules)&&s.modules.forEach(t=>{e(t)})}();let l=i.default.useSyncExternalStore(a.subscribe,a.getCurrentValue,a.getCurrentValue);return i.default.useImperativeHandle(t,()=>({retry:a.retry}),[]),i.default.useMemo(()=>{var t;return l.loading||l.error?i.default.createElement(s.loading,{isLoading:l.loading,pastDelay:l.pastDelay,timedOut:l.timedOut,error:l.error,retry:a.retry}):l.loaded?i.default.createElement((t=l.loaded)&&t.default?t.default:t,e):null},[e,l])}return c.preload=()=>o(),c.displayName="LoadableComponent",i.default.forwardRef(c)}(o,e)}function h(e,t){let s=[];for(;e.length;){let i=e.pop();s.push(i(t))}return Promise.all(s).then(()=>{if(e.length)return h(e,t)})}c.preloadAll=()=>new Promise((e,t)=>{h(a).then(e,t)}),c.preloadReady=e=>(void 0===e&&(e=[]),new Promise(t=>{let s=()=>(n=!0,t());h(l,e).then(s,s)})),window.__NEXT_PRELOADREADY=c.preloadReady;let u=c},5267:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return p}});var i=s(5893),r=s(9008),a=s.n(r),l=s(1163),n=s(7294),o=s(5152);function d(e){let{timeData:t,rawData:r,filteredData:a,thresholdHigh:l,thresholdLow:o}=e,d=(0,n.useRef)(null),c=(0,n.useRef)(null);return(0,n.useEffect)(()=>{if(d.current)return Promise.all([s.e(196),s.e(78)]).then(s.bind(s,9085)).then(e=>{let{Chart:s}=e,i=d.current.getContext("2d");c.current&&c.current.destroy(),c.current=new s(i,{type:"line",data:{labels:t,datasets:[{label:"Raw Acceleration",data:r,borderColor:"rgba(255, 99, 132, 0.5)",backgroundColor:"rgba(255, 99, 132, 0.1)",borderWidth:2,pointRadius:0,tension:.1},{label:"Filtered (Kalman)",data:a,borderColor:"rgba(54, 162, 235, 1)",backgroundColor:"rgba(54, 162, 235, 0.1)",borderWidth:2,pointRadius:0,tension:.1},{label:"High Threshold",data:Array(t.length).fill(l),borderColor:"rgba(75, 192, 192, 0.5)",borderWidth:1,borderDash:[5,5],pointRadius:0,fill:!1},{label:"Low Threshold",data:Array(t.length).fill(o),borderColor:"rgba(255, 159, 64, 0.5)",borderWidth:1,borderDash:[5,5],pointRadius:0,fill:!1}]},options:{responsive:!0,maintainAspectRatio:!1,animation:!1,interaction:{mode:"index",intersect:!1},scales:{x:{display:!0,title:{display:!0,text:"Time (seconds)",color:"rgba(255, 255, 255, 0.7)"},ticks:{color:"rgba(255, 255, 255, 0.5)",maxRotation:0,autoSkipPadding:20},grid:{color:"rgba(255, 255, 255, 0.1)"}},y:{display:!0,title:{display:!0,text:"Acceleration (m/s\xb2)",color:"rgba(255, 255, 255, 0.7)"},ticks:{color:"rgba(255, 255, 255, 0.5)"},grid:{color:"rgba(255, 255, 255, 0.1)"},min:8,max:12}},plugins:{legend:{display:!0,position:"top",labels:{color:"rgba(255, 255, 255, 0.7)",font:{size:11},padding:10,usePointStyle:!0}},tooltip:{enabled:!0,backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"rgba(255, 255, 255, 0.9)",bodyColor:"rgba(255, 255, 255, 0.7)",borderColor:"rgba(255, 255, 255, 0.2)",borderWidth:1}}}})}),()=>{c.current&&c.current.destroy()}},[t,r,a,l,o]),(0,i.jsx)("div",{className:"w-full h-64 md:h-80",children:(0,i.jsx)("canvas",{ref:d})})}function c(e){let{notification:t,onDismiss:s}=e,[r,a]=(0,n.useState)(!1);if((0,n.useEffect)(()=>{if(t){a(!0);let e=setTimeout(()=>{a(!1),s&&setTimeout(s,300)},t.duration||3e3);return()=>clearTimeout(e)}},[t,s]),!t)return null;let l={rep:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",nfc:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",success:"linear-gradient(135deg, #10b981 0%, #059669 100%)",error:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",info:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)"},o={rep:"\uD83C\uDFAF",nfc:"\uD83D\uDCF1",success:"✅",error:"❌",info:"ℹ️"};return(0,i.jsx)("div",{className:"fixed top-20 right-4 z-50 px-6 py-3 rounded-lg text-white font-bold text-lg shadow-lg transform transition-all duration-300 ".concat(r?"translate-x-0 opacity-100":"translate-x-full opacity-0"),style:{background:l[t.type]||l.info},children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("span",{className:"text-2xl",children:o[t.type]||o.info}),(0,i.jsx)("span",{children:t.message})]})})}s.n(o)()(()=>Promise.all([s.e(196),s.e(78)]).then(s.bind(s,9085)).then(e=>e.Chart),{loadableGenerated:{webpack:()=>[null]},ssr:!1});var h=s(7333);class u{addSample(e,t,s,i,r,a,l,n,o,d,c){let h={timestamp:c,accelX:e,accelY:t,accelZ:s,gyroX:i,gyroY:r,gyroZ:a,roll:l,pitch:n,yaw:o,accelMag:d,repNumber:Math.max(1,this.repCount+1)};this.allSamples.push(h),this.accelBuffer.push(d),this.timeBuffer.push(c),this.accelBuffer.length>=this.windowSamples&&this.processWindow()}processWindow(){let e=this.accelBuffer.slice(-this.windowSamples),t=this.timeBuffer.slice(-this.windowSamples),s=Math.max(...e),i=Math.min(...e),r=e.reduce((e,t)=>e+t,0)/e.length,a=s-i,l=Math.min(Math.max(.2*a,.2),Math.max(.6*Math.sqrt(e.reduce((e,t)=>e+Math.pow(t-r,2),0)/e.length),.2));this.thresholdHigh=r+l,this.thresholdLow=r-l,this.repHeight=a,this.detectRepsInWindow(e,t)}detectRepsInWindow(e,t){let s=e.length,i=this.accelBuffer.length-1,r=[];for(let a=3;a<s-3;a++){let l=!0,n=e[a];for(let t=a-3;t<=a+3;t++)if(t!==a&&e[t]>=n){l=!1;break}if(l&&n>this.thresholdHigh){let e=i-(s-1-a);(-1===this.lastPeakIndex||e-this.lastPeakIndex>=this.minPeakDistance)&&r.push({index:e,value:n,time:t[a]})}}let a=[];for(let r=3;r<s-3;r++){let l=!0,n=e[r];for(let t=r-3;t<=r+3;t++)if(t!==r&&e[t]<=n){l=!1;break}if(l&&n<this.thresholdLow){let e=i-(s-1-r);(-1===this.lastValleyIndex||e-this.lastValleyIndex>=this.minPeakDistance)&&a.push({index:e,value:n,time:t[r]})}}if(a.length>=1&&r.length>=1){let e,t,s,i;let l=a[a.length-1],n=r[r.length-1],o=!1;if(l.index<n.index){if(n.index<=this.lastDetectedPeakIndex)return;e=l,t=n,s=Math.abs(n.value-l.value),i=(n.time-l.time)/1e3,o=!0}else if(n.index<l.index){if(l.index<=this.lastDetectedValleyIndex)return;e=n,t=l,s=Math.abs(n.value-l.value),i=(l.time-n.time)/1e3,o=!0}o&&i>=this.minRepDuration&&i<=this.maxRepDuration&&s>=this.minPeakProminence&&(this.completeRep(e,n,t),this.lastDetectedValleyIndex=l.index,this.lastDetectedPeakIndex=n.index,this.lastValleyIndex=l.index,this.lastPeakIndex=n.index,this.lastRepEndTime=t.time)}a.length>0&&0===r.length?(this.inRepPhase=!0,this.state="STARTING"):r.length>0?this.state="LIFTING":(this.inRepPhase=!1,this.state="REST")}completeRep(e,t,s){this.repCount++;let i=(s.time-e.time)/1e3;this.reps.push({repNumber:this.repCount,startTime:e.time,endTime:s.time,duration:i,peakValue:t.value,valleyValue:e.value,range:Math.abs(t.value-e.value)}),this.repTimes.push(i);for(let e=this.allSamples.length-1;e>=0;e--){let t=this.allSamples[e];if(t.repNumber===this.repCount)t.repNumber=this.repCount;else break}}getAverageRepTime(){return 0===this.repTimes.length?0:this.repTimes.reduce((e,t)=>e+t,0)/this.repTimes.length}getLastRepTime(){return this.repTimes.length>0?this.repTimes[this.repTimes.length-1]:0}getStats(){return{repCount:this.repCount,averageRepTime:this.getAverageRepTime(),lastRepTime:this.getLastRepTime(),state:this.state,thresholdHigh:this.thresholdHigh,thresholdLow:this.thresholdLow,repHeight:this.repHeight,bufferSize:this.accelBuffer.length,windowSize:this.windowSamples}}reset(){this.repCount=0,this.accelBuffer=[],this.timeBuffer=[],this.allSamples=[],this.reps=[],this.currentRep=null,this.lastRepEndTime=0,this.repTimes=[],this.state="IDLE",this.lastPeakIndex=-1,this.lastValleyIndex=-1,this.lastDetectedValleyIndex=-1,this.lastDetectedPeakIndex=-1,this.inRepPhase=!1,this.repStartTime=0}exportData(){return{samples:this.allSamples,reps:this.reps,stats:this.getStats()}}constructor(e={}){this.repCount=0,this.windowDuration=e.windowDuration||1.5,this.windowOverlap=e.windowOverlap||.8,this.samplingRate=e.samplingRate||20,this.windowSamples=Math.floor(this.windowDuration*this.samplingRate),this.stepSize=Math.floor(this.windowSamples*(1-this.windowOverlap)),this.accelBuffer=[],this.timeBuffer=[],this.allSamples=[],this.reps=[],this.currentRep=null,this.lastRepEndTime=0,this.minPeakProminence=e.minPeakProminence||.15,this.minPeakDistance=e.minPeakDistance||15,this.minRepDuration=e.minRepDuration||0,this.maxRepDuration=e.maxRepDuration||12,this.thresholdHigh=10.5,this.thresholdLow=9.5,this.repHeight=0,this.state="IDLE",this.lastPeakIndex=-1,this.lastValleyIndex=-1,this.lastDetectedValleyIndex=-1,this.lastDetectedPeakIndex=-1,this.inRepPhase=!1,this.repTimes=[],this.repStartTime=0}}class m{update(e){this.estimationError+=this.processNoise;let t=this.estimationError/(this.estimationError+this.measurementNoise);return this.value+=t*(e-this.value),this.estimationError=(1-t)*this.estimationError,this.value}reset(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.value=e,this.estimationError=1}constructor(e=.01,t=.5,s=1,i=0){this.processNoise=e,this.measurementNoise=t,this.estimationError=s,this.value=i}}function p(){var e,t,s;let r=(0,l.useRouter)(),{equipment:o,workout:p}=r.query,{device:x,connected:f}=(0,h.E)(),[b,g]=(0,n.useState)(!1),[w,y]=(0,n.useState)(!1),[v,j]=(0,n.useState)(!1),[N,R]=(0,n.useState)(3),[S,_]=(0,n.useState)(!1),k=(0,n.useRef)(0),C=(0,n.useRef)([]),F=(0,n.useRef)(new u),[D,T]=(0,n.useState)(F.current.getStats()),[P,M]=(0,n.useState)(null),[E,I]=(0,n.useState)([]),[L,O]=(0,n.useState)([]),[X,Y]=(0,n.useState)([]),[Z,A]=(0,n.useState)({accelX:0,accelY:0,accelZ:0,gyroX:0,gyroY:0,gyroZ:0,roll:0,pitch:0,yaw:0,rawMagnitude:0,filteredMagnitude:0}),[V,H]=(0,n.useState)(0),[B,z]=(0,n.useState)(0),U=(0,n.useRef)(Date.now()),W=(0,n.useRef)(0),{isSubscribed:G,error:q,resetFilters:K}=function(e,t){let{device:s,connected:i}=(0,h.E)(),[r,a]=(0,n.useState)(!1),[l,o]=(0,n.useState)(null),d=(0,n.useRef)(null),c=(0,n.useRef)(null),u=(0,n.useRef)({x:new m(.01,.5,1,0),y:new m(.01,.5,1,0),z:new m(.01,.5,1,9.81)}),p=(0,n.useCallback)(t=>{try{let s=t.target.value,i=new DataView(s.buffer),r={accelX:i.getFloat32(0,!0),accelY:i.getFloat32(4,!0),accelZ:i.getFloat32(8,!0),gyroX:i.getFloat32(12,!0),gyroY:i.getFloat32(16,!0),gyroZ:i.getFloat32(20,!0),roll:i.getFloat32(24,!0),pitch:i.getFloat32(28,!0),yaw:i.getFloat32(32,!0),timestamp:i.getUint32(36,!0)},a=Math.sqrt(r.accelX*r.accelX+r.accelY*r.accelY+r.accelZ*r.accelZ),l=u.current,n=l.x.update(r.accelX),o=l.y.update(r.accelY),d=l.z.update(r.accelZ);e&&e({...r,rawMagnitude:a,filteredX:n,filteredY:o,filteredZ:d,filteredMagnitude:Math.sqrt(n*n+o*o+d*d)})}catch(e){console.error("Error parsing IMU data:",e),o(e.message)}},[e]),x=(0,n.useCallback)(e=>{try{let t=e.target.value,s=new DataView(t.buffer),i=s.getUint8(0);for(let e=1;e<=i&&e<t.byteLength;e++)String.fromCharCode(s.getUint8(e))}catch(e){console.error("Error parsing NFC data:",e),o(e.message)}},[null]);return(0,n.useEffect)(()=>{if(!s||!i||!s.gatt){a(!1);return}let e=!0;return async function(){try{o(null);let t=s.gatt;t.connected||await t.connect();let i=await t.getPrimaryService("4fafc201-1fb5-459e-8fcc-c5c9c331914b"),r=await i.getCharacteristic("beb5483e-36e1-4688-b7f5-ea07361b26a8");await r.startNotifications(),r.addEventListener("characteristicvaluechanged",p),d.current=r;try{let e=await i.getCharacteristic("ceb5483e-36e1-4688-b7f5-ea07361b26a8");await e.startNotifications(),e.addEventListener("characteristicvaluechanged",x),c.current=e}catch(e){console.warn("NFC characteristic not available:",e)}e&&a(!0)}catch(t){console.error("Failed to subscribe to characteristics:",t),e&&(o(t.message),a(!1))}}(),()=>{if(e=!1,d.current){try{d.current.removeEventListener("characteristicvaluechanged",p),d.current.stopNotifications()}catch(e){console.error("Error cleaning up IMU characteristic:",e)}d.current=null}if(c.current){try{c.current.removeEventListener("characteristicvaluechanged",x),c.current.stopNotifications()}catch(e){console.error("Error cleaning up NFC characteristic:",e)}c.current=null}}},[s,i,p,x]),{isSubscribed:r,error:l,resetFilters:(0,n.useCallback)(()=>{u.current.x.reset(0),u.current.y.reset(0),u.current.z.reset(9.81)},[])}}((0,n.useCallback)(e=>{A(e),W.current++;let t=Date.now();if(t-U.current>=1e3&&(z(W.current),H(e=>e+W.current),W.current=0,U.current=t),b&&!w&&!S){0===k.current&&(k.current=e.timestamp);let t=e.timestamp-k.current;C.current.push({timestamp:t,...e});let s=Math.floor(t/1e3),i=t%1e3,r="".concat(s,".").concat(i.toString().padStart(3,"0"));I(e=>{let t=[...e,r];return t.length>100?t.slice(-100):t}),O(t=>{let s=[...t,e.rawMagnitude];return s.length>100?s.slice(-100):s}),Y(t=>{let s=[...t,e.filteredMagnitude];return s.length>100?s.slice(-100):s}),F.current.addSample(e.accelX,e.accelY,e.accelZ,e.gyroX,e.gyroY,e.gyroZ,e.roll,e.pitch,e.yaw,e.filteredMagnitude,t),T(F.current.getStats())}},[b,w,S]),0);(0,n.useEffect)(()=>{D.repCount>0&&(M({type:"rep",message:"Rep #".concat(D.repCount)}),setTimeout(()=>M(null),500))},[D.repCount]);let J=async()=>{if(!f||!G){alert("Please connect to your IMU device first!");return}g(!0),_(!0),y(!1),k.current=0,C.current=[],F.current.reset(),K(),T(F.current.getStats()),I([]),O([]),Y([]),H(0),j(!0),R(3);for(let e=3;e>0;e--)R(e),await new Promise(e=>setTimeout(e,1e3));R("GO!"),await new Promise(e=>setTimeout(e,500)),_(!1),j(!1),_(!1)},Q=()=>{let e=F.current.exportData().samples;if(0===e.length){alert("No data to export!");return}let t="rep,timestamp,timestamp_ms,accelX,accelY,accelZ,accelMag,gyroX,gyroY,gyroZ,roll,pitch,yaw,filteredX,filteredY,filteredZ,filteredMag\n";e.forEach(e=>{let s=Math.floor(e.timestamp/1e3),i=e.timestamp%1e3,r="".concat(s.toString().padStart(2,"0"),".").concat(i.toString().padStart(3,"0")),a=[e.repNumber,r,e.timestamp,e.accelX.toFixed(4),e.accelY.toFixed(4),e.accelZ.toFixed(4),e.accelMag.toFixed(4),e.gyroX.toFixed(4),e.gyroY.toFixed(4),e.gyroZ.toFixed(4),e.roll.toFixed(2),e.pitch.toFixed(2),e.yaw.toFixed(2),e.accelX.toFixed(4),e.accelY.toFixed(4),e.accelZ.toFixed(4),e.accelMag.toFixed(4)];t+=a.join(",")+"\n"});let s=new Blob([t],{type:"text/csv"}),i=window.URL.createObjectURL(s),r=document.createElement("a");r.href=i,r.download="applift_".concat(p,"_").concat(new Date().toISOString().replace(/[:.]/g,"-"),".csv"),document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(i)};return(0,i.jsxs)("div",{className:"relative min-h-screen bg-black text-white",children:[(0,i.jsx)(a(),{children:(0,i.jsxs)("title",{children:["Workout Monitor — ",p," — AppLift"]})}),v&&(0,i.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90",children:(0,i.jsx)("div",{className:"text-9xl font-bold text-white animate-pulse",children:N})}),(0,i.jsx)(c,{notification:P,onDismiss:()=>M(null)}),(0,i.jsxs)("main",{className:"mx-auto w-full max-w-[1200px] px-4 pt-6 pb-24 space-y-4",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("button",{onClick:()=>r.back(),className:"flex items-center justify-center h-10 w-10 rounded-lg bg-white/10 hover:bg-white/20 transition-all","aria-label":"Go back",children:(0,i.jsx)("img",{src:"/images/icons/arrow-point-to-left.png",alt:"Back",className:"w-5 h-5 filter brightness-0 invert"})}),(0,i.jsxs)("div",{className:"flex-1 text-center",children:[(0,i.jsx)("h1",{className:"text-xl font-bold",children:p}),(0,i.jsx)("p",{className:"text-xs text-white/60",children:o})]}),(0,i.jsx)("div",{className:"w-10"})]}),!f&&(0,i.jsx)("div",{className:"rounded-xl bg-red-500/20 border border-red-500/50 p-4 text-center",children:(0,i.jsx)("p",{className:"text-sm text-red-300",children:"⚠️ Device not connected. Please connect your IMU device."})}),(0,i.jsxs)("div",{className:"rounded-2xl p-6 text-center",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:[(0,i.jsx)("h3",{className:"text-sm font-semibold text-white/80 mb-2",children:"Rep Count"}),(0,i.jsx)("p",{className:"text-6xl font-bold text-white mb-2",children:D.repCount}),(0,i.jsx)("div",{className:"inline-block px-3 py-1 rounded-full text-xs font-bold ".concat("LIFTING"===D.state?"bg-green-500":"bg-white/20"),children:D.state})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[b?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{onClick:()=>{y(e=>!e)},className:"flex-1 py-3 px-4 rounded-xl font-semibold text-white",style:{background:"linear-gradient(to bottom right, #f59e0b 0%, #d97706 100%)"},children:w?"Resume":"Pause"}),(0,i.jsx)("button",{onClick:()=>{g(!1),y(!1),C.current.length>0&&confirm("Recorded ".concat(D.repCount," reps with ").concat(C.current.length," samples. Download CSV?"))&&Q()},className:"flex-1 py-3 px-4 rounded-xl font-semibold text-white",style:{background:"linear-gradient(to bottom right, #ef4444 0%, #dc2626 100%)"},children:"Stop & Save"})]}):(0,i.jsx)("button",{onClick:J,disabled:!f||!G,className:"flex-1 py-3 px-4 rounded-xl font-semibold text-white transition-all disabled:opacity-50 disabled:cursor-not-allowed",style:{background:"linear-gradient(to bottom right, #10b981 0%, #059669 100%)"},children:"Start Workout"}),(0,i.jsx)("button",{onClick:()=>{F.current.reset(),T(F.current.getStats())},className:"py-3 px-4 rounded-xl font-semibold text-white bg-white/10 hover:bg-white/20",children:"Reset"})]}),(0,i.jsxs)("div",{className:"rounded-2xl bg-white/5 p-4 border border-white/10",children:[(0,i.jsx)("h3",{className:"text-sm font-semibold text-white mb-3",children:"Real-time Acceleration"}),(0,i.jsx)(d,{timeData:E,rawData:L,filteredData:X,thresholdHigh:D.thresholdHigh,thresholdLow:D.thresholdLow})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{className:"rounded-xl bg-white/5 p-4 border border-white/10",children:[(0,i.jsx)("h3",{className:"text-xs font-semibold text-white/70 mb-2",children:"Accelerometer (Raw)"}),(0,i.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,i.jsxs)("div",{children:["X: ",(0,i.jsx)("span",{className:"font-bold text-blue-400",children:Z.accelX.toFixed(2)})," m/s\xb2"]}),(0,i.jsxs)("div",{children:["Y: ",(0,i.jsx)("span",{className:"font-bold text-green-400",children:Z.accelY.toFixed(2)})," m/s\xb2"]}),(0,i.jsxs)("div",{children:["Z: ",(0,i.jsx)("span",{className:"font-bold text-purple-400",children:Z.accelZ.toFixed(2)})," m/s\xb2"]}),(0,i.jsxs)("div",{children:["Mag: ",(0,i.jsx)("span",{className:"font-bold text-yellow-400",children:Z.rawMagnitude.toFixed(2)})," m/s\xb2"]})]})]}),(0,i.jsxs)("div",{className:"rounded-xl bg-white/5 p-4 border border-white/10",children:[(0,i.jsx)("h3",{className:"text-xs font-semibold text-white/70 mb-2",children:"Accelerometer (Filtered)"}),(0,i.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,i.jsxs)("div",{children:["X: ",(0,i.jsx)("span",{className:"font-bold text-blue-400",children:(null===(e=Z.filteredX)||void 0===e?void 0:e.toFixed(2))||"0.00"})," m/s\xb2"]}),(0,i.jsxs)("div",{children:["Y: ",(0,i.jsx)("span",{className:"font-bold text-green-400",children:(null===(t=Z.filteredY)||void 0===t?void 0:t.toFixed(2))||"0.00"})," m/s\xb2"]}),(0,i.jsxs)("div",{children:["Z: ",(0,i.jsx)("span",{className:"font-bold text-purple-400",children:(null===(s=Z.filteredZ)||void 0===s?void 0:s.toFixed(2))||"0.00"})," m/s\xb2"]}),(0,i.jsxs)("div",{children:["Mag: ",(0,i.jsx)("span",{className:"font-bold text-yellow-400",children:Z.filteredMagnitude.toFixed(2)})," m/s\xb2"]})]})]}),(0,i.jsxs)("div",{className:"rounded-xl bg-white/5 p-4 border border-white/10",children:[(0,i.jsx)("h3",{className:"text-xs font-semibold text-white/70 mb-2",children:"Gyroscope"}),(0,i.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,i.jsxs)("div",{children:["X: ",(0,i.jsx)("span",{className:"font-bold",children:Z.gyroX.toFixed(2)})," rad/s"]}),(0,i.jsxs)("div",{children:["Y: ",(0,i.jsx)("span",{className:"font-bold",children:Z.gyroY.toFixed(2)})," rad/s"]}),(0,i.jsxs)("div",{children:["Z: ",(0,i.jsx)("span",{className:"font-bold",children:Z.gyroZ.toFixed(2)})," rad/s"]})]})]}),(0,i.jsxs)("div",{className:"rounded-xl bg-white/5 p-4 border border-white/10",children:[(0,i.jsx)("h3",{className:"text-xs font-semibold text-white/70 mb-2",children:"Orientation"}),(0,i.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,i.jsxs)("div",{children:["Roll: ",(0,i.jsxs)("span",{className:"font-bold",children:[Z.roll.toFixed(1),"\xb0"]})]}),(0,i.jsxs)("div",{children:["Pitch: ",(0,i.jsxs)("span",{className:"font-bold",children:[Z.pitch.toFixed(1),"\xb0"]})]}),(0,i.jsxs)("div",{children:["Yaw: ",(0,i.jsxs)("span",{className:"font-bold",children:[Z.yaw.toFixed(1),"\xb0"]})]})]})]}),(0,i.jsxs)("div",{className:"rounded-xl bg-white/5 p-4 border border-white/10",children:[(0,i.jsx)("h3",{className:"text-xs font-semibold text-white/70 mb-2",children:"Rep Detection"}),(0,i.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,i.jsxs)("div",{children:["State: ",(0,i.jsx)("span",{className:"font-bold",children:D.state})]}),(0,i.jsxs)("div",{children:["Buffer: ",(0,i.jsxs)("span",{className:"font-bold",children:[D.bufferSize,"/",D.windowSize]})]}),(0,i.jsxs)("div",{children:["Range: ",(0,i.jsx)("span",{className:"font-bold",children:D.repHeight.toFixed(3)})," m/s\xb2"]})]})]}),(0,i.jsxs)("div",{className:"rounded-xl bg-white/5 p-4 border border-white/10",children:[(0,i.jsx)("h3",{className:"text-xs font-semibold text-white/70 mb-2",children:"Thresholds"}),(0,i.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,i.jsxs)("div",{children:["High: ",(0,i.jsx)("span",{className:"font-bold text-cyan-400",children:D.thresholdHigh.toFixed(2)})]}),(0,i.jsxs)("div",{children:["Low: ",(0,i.jsx)("span",{className:"font-bold text-orange-400",children:D.thresholdLow.toFixed(2)})]}),(0,i.jsxs)("div",{children:["Range: ",(0,i.jsx)("span",{className:"font-bold",children:(D.thresholdHigh-D.thresholdLow).toFixed(2)})]})]})]}),(0,i.jsxs)("div",{className:"rounded-xl bg-white/5 p-4 border border-white/10",children:[(0,i.jsx)("h3",{className:"text-xs font-semibold text-white/70 mb-2",children:"Statistics"}),(0,i.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,i.jsxs)("div",{children:["Avg Time: ",(0,i.jsxs)("span",{className:"font-bold",children:[D.averageRepTime.toFixed(2),"s"]})]}),(0,i.jsxs)("div",{children:["Last Rep: ",(0,i.jsxs)("span",{className:"font-bold",children:[D.lastRepTime.toFixed(2),"s"]})]}),(0,i.jsxs)("div",{children:["Samples: ",(0,i.jsx)("span",{className:"font-bold",children:V})]})]})]}),(0,i.jsxs)("div",{className:"rounded-xl bg-white/5 p-4 border border-white/10",children:[(0,i.jsx)("h3",{className:"text-xs font-semibold text-white/70 mb-2",children:"Connection"}),(0,i.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,i.jsxs)("div",{children:["Status: ",(0,i.jsx)("span",{className:"font-bold ".concat(f?"text-green-400":"text-red-400"),children:f?"Connected":"Disconnected"})]}),(0,i.jsxs)("div",{children:["IMU: ",(0,i.jsx)("span",{className:"font-bold ".concat(G?"text-green-400":"text-yellow-400"),children:G?"Active":"Inactive"})]}),(0,i.jsxs)("div",{children:["Rate: ",(0,i.jsxs)("span",{className:"font-bold",children:[B," Hz"]})]})]})]})]})]})]})}},5152:function(e,t,s){e.exports=s(2602)},9008:function(e,t,s){e.exports=s(3867)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=1252)}),_N_E=e.O()}]);