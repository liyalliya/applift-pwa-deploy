(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[634],{1252:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/workout-monitor",function(){return a(4317)}])},2492:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var r=a(5893),s=a(645),i=a.n(s),l=a(7294);function n(e){var t,a;let{connected:s,device:n,onScan:o,onConnect:c,onDisconnect:d,scanning:u,devicesFound:h=[],availability:m,collapse:f=0}=e,[x,p]=(0,l.useState)(!1),g=(0,l.useRef)(null);(0,l.useEffect)(()=>{function e(e){g.current&&!g.current.contains(e.target)&&p(!1)}return x&&document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[x]),(0,l.useEffect)(()=>{function e(e){"Escape"===e.key&&p(!1)}return x&&document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[x]);let b=async()=>{o&&await o()},w=async e=>{c&&(await c(e),p(!1))};return(0,r.jsxs)(r.Fragment,{children:[x&&(0,r.jsx)("div",{style:{animation:"fadeIn 0.3s ease-out"},onClick:()=>p(!1),className:"jsx-82ef8ed3900938e3 fixed inset-0 bg-black/60 backdrop-blur-sm z-[9999] transition-opacity duration-300"}),(0,r.jsx)("div",{ref:g,style:{width:f>0?"56px":"100%",maxWidth:f>0?"56px":"28rem",paddingLeft:f>0||x?"auto":"20px",paddingRight:f>0||x?"auto":"20px",paddingLeft:x?"24px":f>0?"12px":"20px",paddingRight:x?"24px":f>0?"12px":"20px",maxHeight:x?"520px":"88px",background:s?"radial-gradient(circle, rgb(141, 184, 11) 0%, rgb(56, 139, 42) 50%, rgb(59, 105, 2) 100%)":"linear-gradient(90deg, #2A2A2A 0%, #3A3A3A 100%)",borderColor:s?"rgba(5, 150, 105, 0.55)":"rgba(107, 114, 128, 0.45)",boxShadow:s?"0 18px 50px rgba(16, 185, 129, 0.25)":"0 14px 40px rgba(0, 0, 0, 0.25)",transition:x||f>0?"max-height 600ms ease, padding 400ms ease, border-radius 400ms ease, background 800ms ease-in-out, border-color 800ms ease-in-out, box-shadow 800ms ease-in-out, width 600ms ease, max-width 600ms ease":"max-height 600ms ease, padding 400ms ease, border-radius 400ms ease, background 800ms ease-in-out, border-color 800ms ease-in-out, box-shadow 800ms ease-in-out",animation:s?"shimmer 12s linear infinite":"none",backgroundSize:s?"150% 100%":"100% 100%",backgroundPosition:"left center"},className:"jsx-82ef8ed3900938e3 "+"relative overflow-hidden border shadow-lg transition-all duration-600 ease-[cubic-bezier(0.22,1,0.36,1)] ".concat(x?"z-[10000] rounded-[24px] px-6 py-6 w-full max-w-sm":"z-50 rounded-[32px] py-3"),children:!x&&f<1?(0,r.jsxs)("button",{onClick:()=>p(!0),style:{opacity:0===f?1:0},className:"jsx-82ef8ed3900938e3 flex flex-1 items-center gap-3 w-full cursor-pointer active:scale-98 transition-transform duration-300 ease-[cubic-bezier(0.22,1,0.36,1)]",children:[(0,r.jsx)("div",{className:"jsx-82ef8ed3900938e3 "+"flex h-10 w-10 items-center justify-center rounded-full transition-all duration-300 flex-shrink-0 ".concat(s?"bg-white/20":"bg-gray-600/40"),children:(0,r.jsx)("svg",{width:"22",height:"22",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:"jsx-82ef8ed3900938e3",children:(0,r.jsx)("path",{fill:"#ffffff",d:"m9.41 0l6 6l-4 4l4 4l-6 6H9v-7.59l-3.3 3.3l-1.4-1.42L8.58 10l-4.3-4.3L5.7 4.3L9 7.58V0h.41zM11 4.41V7.6L12.59 6L11 4.41zM12.59 14L11 12.41v3.18L12.59 14z",className:"jsx-82ef8ed3900938e3"})})}),(0,r.jsxs)("div",{style:{opacity:Math.max(0,1-1.5*f)},className:"jsx-82ef8ed3900938e3 flex flex-col leading-tight items-start",children:[(0,r.jsx)("span",{className:"jsx-82ef8ed3900938e3 text-xs font-medium tracking-tight text-white",children:"Your Device is"}),(0,r.jsx)("span",{className:"jsx-82ef8ed3900938e3 text-sm text-white/80 font-semibold tracking-tight",children:s?"Connected":"Not Connected"})]})]}):f>=1?(0,r.jsx)("button",{onClick:()=>p(!0),style:{background:"transparent",margin:"0 auto"},"aria-label":"Bluetooth",className:"jsx-82ef8ed3900938e3 flex items-center justify-center w-10 h-10 rounded-full transition-all duration-300 cursor-pointer",children:(0,r.jsx)("svg",{width:"22",height:"22",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:"jsx-82ef8ed3900938e3",children:(0,r.jsx)("path",{fill:"#ffffff",d:"m9.41 0l6 6l-4 4l4 4l-6 6H9v-7.59l-3.3 3.3l-1.4-1.42L8.58 10l-4.3-4.3L5.7 4.3L9 7.58V0h.41zM11 4.41V7.6L12.59 6L11 4.41zM12.59 14L11 12.41v3.18L12.59 14z",className:"jsx-82ef8ed3900938e3"})})}):(0,r.jsxs)("div",{className:"jsx-82ef8ed3900938e3 space-y-4",children:[(0,r.jsxs)("div",{className:"jsx-82ef8ed3900938e3 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"jsx-82ef8ed3900938e3 flex items-center gap-3",children:[(0,r.jsx)("div",{className:"jsx-82ef8ed3900938e3 "+"flex h-10 w-10 items-center justify-center rounded-full ".concat(s?"bg-white/20":"bg-gray-600/40"),children:(0,r.jsx)("svg",{width:"22",height:"22",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:"jsx-82ef8ed3900938e3",children:(0,r.jsx)("path",{fill:"#ffffff",d:"m9.41 0l6 6l-4 4l4 4l-6 6H9v-7.59l-3.3 3.3l-1.4-1.42L8.58 10l-4.3-4.3L5.7 4.3L9 7.58V0h.41zM11 4.41V7.6L12.59 6L11 4.41zM12.59 14L11 12.41v3.18L12.59 14z",className:"jsx-82ef8ed3900938e3"})})}),(0,r.jsxs)("div",{className:"jsx-82ef8ed3900938e3 flex flex-col leading-tight",children:[(0,r.jsx)("span",{className:"jsx-82ef8ed3900938e3 text-sm font-semibold text-white",children:"Bluetooth Pairing"}),(0,r.jsx)("span",{className:"jsx-82ef8ed3900938e3 text-xs text-white/70",children:s?"Connected":"Not Connected"})]})]}),(0,r.jsx)("button",{onClick:()=>p(!1),"aria-label":"Close",className:"jsx-82ef8ed3900938e3 flex h-8 w-8 items-center justify-center rounded-full bg-white/10 text-white/80 hover:bg-white/20 transition-colors",children:"✕"})]}),s&&n?(0,r.jsxs)("div",{className:"jsx-82ef8ed3900938e3 space-y-3",children:[(0,r.jsxs)("div",{className:"jsx-82ef8ed3900938e3 rounded-2xl bg-white/10 border border-white/20 p-4",children:[(0,r.jsx)("div",{className:"jsx-82ef8ed3900938e3 text-xs text-white/60 mb-1",children:"Connected Device"}),(0,r.jsx)("div",{className:"jsx-82ef8ed3900938e3 text-sm font-semibold text-white",children:null!==(a=null!==(t=n.name)&&void 0!==t?t:n.id)&&void 0!==a?a:"Unknown Device"})]}),(0,r.jsx)("button",{onClick:()=>{d&&d(),p(!1)},className:"jsx-82ef8ed3900938e3 w-full py-3 rounded-full bg-[#b34a4a] hover:bg-[#a24141] text-white font-medium transition-colors",children:"Disconnect"})]}):(0,r.jsxs)("div",{className:"jsx-82ef8ed3900938e3 space-y-3",children:[(0,r.jsx)("p",{className:"jsx-82ef8ed3900938e3 text-xs text-white/70",children:"Tap Scan to find nearby Bluetooth devices."}),(0,r.jsx)("button",{onClick:b,disabled:u||!m,className:"jsx-82ef8ed3900938e3 w-full py-3 rounded-full bg-white text-black font-medium hover:bg-white/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Scanning…":"Scan Devices"}),!m&&(0,r.jsx)("p",{className:"jsx-82ef8ed3900938e3 text-xs text-red-400 text-center",children:"Bluetooth is off or unavailable."}),h.length>0&&(0,r.jsxs)("div",{className:"jsx-82ef8ed3900938e3 space-y-2 max-h-48 overflow-y-auto",children:[(0,r.jsx)("div",{className:"jsx-82ef8ed3900938e3 text-xs text-white/60 font-medium",children:"Available Devices"}),h.map(e=>{var t,a;return(0,r.jsxs)("button",{onClick:()=>w(e),className:"jsx-82ef8ed3900938e3 w-full px-4 py-3 rounded-xl bg-white/10 hover:bg-white/20 border border-white/20 text-left transition-colors",children:[(0,r.jsx)("div",{className:"jsx-82ef8ed3900938e3 text-sm font-medium text-white",children:null!==(a=null!==(t=e.name)&&void 0!==t?t:e.id)&&void 0!==a?a:"Unknown Device"}),(0,r.jsx)("div",{className:"jsx-82ef8ed3900938e3 text-xs text-white/60 mt-0.5",children:"Tap to connect"})]},e.id)})]})]})]})}),(0,r.jsx)(i(),{id:"82ef8ed3900938e3",children:"@-webkit-keyframes fadeIn{from{opacity:0}to{opacity:1}}@-moz-keyframes fadeIn{from{opacity:0}to{opacity:1}}@-o-keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@-webkit-keyframes shimmer{0%{background-position:-150%center}100%{background-position:150%center}}@-moz-keyframes shimmer{0%{background-position:-150%center}100%{background-position:150%center}}@-o-keyframes shimmer{0%{background-position:-150%center}100%{background-position:150%center}}@keyframes shimmer{0%{background-position:-150%center}100%{background-position:150%center}}"})]})}},2602:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{default:function(){return n},noSSR:function(){return l}});let r=a(8754);a(5893),a(7294);let s=r._(a(5491));function i(e){return{default:(null==e?void 0:e.default)||e}}function l(e,t){return delete t.webpack,delete t.modules,e(t)}function n(e,t){let a=s.default,r={loading:e=>{let{error:t,isLoading:a,pastDelay:r}=e;return null}};e instanceof Promise?r.loader=()=>e:"function"==typeof e?r.loader=e:"object"==typeof e&&(r={...r,...e});let n=(r={...r,...t}).loader;return(r.loadableGenerated&&(r={...r,...r.loadableGenerated},delete r.loadableGenerated),"boolean"!=typeof r.ssr||r.ssr)?a({...r,loader:()=>null!=n?n().then(i):Promise.resolve(i(()=>null))}):(delete r.webpack,delete r.modules,l(a,r))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1159:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"LoadableContext",{enumerable:!0,get:function(){return r}});let r=a(8754)._(a(7294)).default.createContext(null)},5491:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return h}});let r=a(8754)._(a(7294)),s=a(1159),i=[],l=[],n=!1;function o(e){let t=e(),a={loading:!0,loaded:null,error:null};return a.promise=t.then(e=>(a.loading=!1,a.loaded=e,e)).catch(e=>{throw a.loading=!1,a.error=e,e}),a}class c{promise(){return this._res.promise}retry(){this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};let{_res:e,_opts:t}=this;e.loading&&("number"==typeof t.delay&&(0===t.delay?this._state.pastDelay=!0:this._delay=setTimeout(()=>{this._update({pastDelay:!0})},t.delay)),"number"==typeof t.timeout&&(this._timeout=setTimeout(()=>{this._update({timedOut:!0})},t.timeout))),this._res.promise.then(()=>{this._update({}),this._clearTimeouts()}).catch(e=>{this._update({}),this._clearTimeouts()}),this._update({})}_update(e){this._state={...this._state,error:this._res.error,loaded:this._res.loaded,loading:this._res.loading,...e},this._callbacks.forEach(e=>e())}_clearTimeouts(){clearTimeout(this._delay),clearTimeout(this._timeout)}getCurrentValue(){return this._state}subscribe(e){return this._callbacks.add(e),()=>{this._callbacks.delete(e)}}constructor(e,t){this._loadFn=e,this._opts=t,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}}function d(e){return function(e,t){let a=Object.assign({loader:null,loading:null,delay:200,timeout:null,webpack:null,modules:null},t),i=null;function o(){if(!i){let t=new c(e,a);i={getCurrentValue:t.getCurrentValue.bind(t),subscribe:t.subscribe.bind(t),retry:t.retry.bind(t),promise:t.promise.bind(t)}}return i.promise()}if(!n){let e=a.webpack?a.webpack():a.modules;e&&l.push(t=>{for(let a of e)if(t.includes(a))return o()})}function d(e,t){!function(){o();let e=r.default.useContext(s.LoadableContext);e&&Array.isArray(a.modules)&&a.modules.forEach(t=>{e(t)})}();let l=r.default.useSyncExternalStore(i.subscribe,i.getCurrentValue,i.getCurrentValue);return r.default.useImperativeHandle(t,()=>({retry:i.retry}),[]),r.default.useMemo(()=>{var t;return l.loading||l.error?r.default.createElement(a.loading,{isLoading:l.loading,pastDelay:l.pastDelay,timedOut:l.timedOut,error:l.error,retry:i.retry}):l.loaded?r.default.createElement((t=l.loaded)&&t.default?t.default:t,e):null},[e,l])}return d.preload=()=>o(),d.displayName="LoadableComponent",r.default.forwardRef(d)}(o,e)}function u(e,t){let a=[];for(;e.length;){let r=e.pop();a.push(r(t))}return Promise.all(a).then(()=>{if(e.length)return u(e,t)})}d.preloadAll=()=>new Promise((e,t)=>{u(i).then(e,t)}),d.preloadReady=e=>(void 0===e&&(e=[]),new Promise(t=>{let a=()=>(n=!0,t());u(l,e).then(a,a)})),window.__NEXT_PRELOADREADY=d.preloadReady;let h=d},4317:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return x}});var r=a(5893),s=a(9008),i=a.n(s),l=a(1163),n=a(7294),o=a(5152);function c(e){let{timeData:t,rawData:s,filteredData:i,thresholdHigh:l,thresholdLow:o}=e,c=(0,n.useRef)(null),d=(0,n.useRef)(null);return(0,n.useEffect)(()=>{if(c.current)return Promise.all([a.e(196),a.e(78)]).then(a.bind(a,9085)).then(e=>{let{Chart:a}=e,r=c.current.getContext("2d");d.current&&d.current.destroy();let s=r.createLinearGradient(0,0,r.canvas.width,0);s.addColorStop(0,"rgba(192, 132, 252, 1)"),s.addColorStop(.3,"rgba(168, 85, 247, 1)"),s.addColorStop(.7,"rgba(147, 51, 234, 1)"),s.addColorStop(1,"rgba(139, 92, 246, 1)");let n=r.createLinearGradient(0,0,0,r.canvas.height);n.addColorStop(0,"rgba(168, 85, 247, 0.45)"),n.addColorStop(.15,"rgba(168, 85, 247, 0.25)"),n.addColorStop(.4,"rgba(168, 85, 247, 0.13)"),n.addColorStop(.7,"rgba(168, 85, 247, 0.07)"),n.addColorStop(1,"rgba(168, 85, 247, 0)"),d.current=new a(r,{type:"line",data:{labels:t,datasets:[{label:"Filtered (Kalman)",data:i,borderColor:s,backgroundColor:n,borderWidth:7,pointRadius:0,tension:.4,fill:!0,shadowOffsetX:0,shadowOffsetY:0,shadowBlur:48,shadowColor:"rgba(168, 85, 247, 0.85)",segment:{borderColor:e=>{let t=e.chart.ctx.createLinearGradient(0,0,e.chart.width,0);return t.addColorStop(0,"rgba(192, 132, 252, 1)"),t.addColorStop(.3,"rgba(168, 85, 247, 1)"),t.addColorStop(.7,"rgba(147, 51, 234, 1)"),t.addColorStop(1,"rgba(139, 92, 246, 1)"),t}}},{label:"High Threshold",data:Array(t.length).fill(l),borderColor:"rgba(251, 191, 36, 0.35)",backgroundColor:"transparent",borderWidth:2,borderDash:[8,4],pointRadius:0,fill:!1,tension:0},{label:"Low Threshold",data:Array(t.length).fill(o),borderColor:"rgba(34, 211, 238, 0.35)",backgroundColor:"transparent",borderWidth:2,borderDash:[8,4],pointRadius:0,fill:!1,tension:0}]},options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:0},interaction:{mode:"index",intersect:!1},scales:{x:{display:!0,title:{display:!1},ticks:{display:!1},grid:{display:!1,drawBorder:!1}},y:{display:!0,title:{display:!1},ticks:{display:!1},grid:{display:!0,color:"rgba(255, 255, 255, 0.1)",lineWidth:.5,drawBorder:!1},min:-2,max:18,grace:0}},plugins:{legend:{display:!1},tooltip:{enabled:!0,backgroundColor:"rgba(0, 0, 0, 0.9)",titleColor:"rgba(255, 255, 255, 0.95)",bodyColor:"rgba(255, 255, 255, 0.8)",borderColor:"rgba(168, 85, 247, 0.5)",borderWidth:1,padding:12,cornerRadius:8,displayColors:!0,callbacks:{labelColor:function(e){return 0===e.datasetIndex?{borderColor:"rgba(168, 85, 247, 1)",backgroundColor:"rgba(168, 85, 247, 1)"}:{borderColor:e.dataset.borderColor,backgroundColor:e.dataset.borderColor}}}}}},plugins:[{id:"glowEffect",beforeDatasetsDraw:e=>{let t=e.ctx;e.data.datasets.forEach((a,r)=>{0===r&&e.isDatasetVisible(r)&&!e.getDatasetMeta(r).hidden&&(t.save(),t.shadowColor="rgba(168, 85, 247, 1)",t.shadowBlur=30,t.shadowOffsetX=0,t.shadowOffsetY=0,t.restore())})}}]})}),()=>{d.current&&d.current.destroy()}},[t,i,l,o]),(0,r.jsx)("div",{className:"absolute inset-0 w-full h-full",style:{paddingTop:"10px",paddingBottom:"0px"},children:(0,r.jsx)("canvas",{ref:c,className:"w-full h-full"})})}function d(e){let{notification:t,onDismiss:a}=e,[s,i]=(0,n.useState)(!1);if((0,n.useEffect)(()=>{if(t){i(!0);let e=setTimeout(()=>{i(!1),a&&setTimeout(a,300)},t.duration||3e3);return()=>clearTimeout(e)}},[t,a]),!t)return null;let l={rep:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",nfc:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",success:"linear-gradient(135deg, #10b981 0%, #059669 100%)",error:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",info:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)"},o={rep:"\uD83C\uDFAF",nfc:"\uD83D\uDCF1",success:"✅",error:"❌",info:"ℹ️"};return(0,r.jsx)("div",{className:"fixed top-20 right-4 z-50 px-6 py-3 rounded-lg text-white font-bold text-lg shadow-lg transform transition-all duration-300 ".concat(s?"translate-x-0 opacity-100":"translate-x-full opacity-0"),style:{background:l[t.type]||l.info},children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-2xl",children:o[t.type]||o.info}),(0,r.jsx)("span",{children:t.message})]})})}a.n(o)()(()=>Promise.all([a.e(196),a.e(78)]).then(a.bind(a,9085)).then(e=>e.Chart),{loadableGenerated:{webpack:()=>[null]},ssr:!1});var u=a(2492),h=a(7333);class m{addSample(e,t,a,r,s,i,l,n,o,c,d){let u={timestamp:d,accelX:e,accelY:t,accelZ:a,gyroX:r,gyroY:s,gyroZ:i,roll:l,pitch:n,yaw:o,accelMag:c,repNumber:Math.max(1,this.repCount+1)};this.allSamples.push(u),this.accelBuffer.push(c),this.timeBuffer.push(d),this.accelBuffer.length>=this.windowSamples&&this.processWindow()}processWindow(){let e=this.accelBuffer.slice(-this.windowSamples),t=this.timeBuffer.slice(-this.windowSamples),a=Math.max(...e),r=Math.min(...e),s=e.reduce((e,t)=>e+t,0)/e.length,i=a-r,l=Math.min(Math.max(.2*i,.2),Math.max(.6*Math.sqrt(e.reduce((e,t)=>e+Math.pow(t-s,2),0)/e.length),.2));this.thresholdHigh=s+l,this.thresholdLow=s-l,this.repHeight=i,this.detectRepsInWindow(e,t)}detectRepsInWindow(e,t){let a=e.length,r=this.accelBuffer.length-1,s=[];for(let i=3;i<a-3;i++){let l=!0,n=e[i];for(let t=i-3;t<=i+3;t++)if(t!==i&&e[t]>=n){l=!1;break}if(l&&n>this.thresholdHigh){let e=r-(a-1-i);(-1===this.lastPeakIndex||e-this.lastPeakIndex>=this.minPeakDistance)&&s.push({index:e,value:n,time:t[i]})}}let i=[];for(let s=3;s<a-3;s++){let l=!0,n=e[s];for(let t=s-3;t<=s+3;t++)if(t!==s&&e[t]<=n){l=!1;break}if(l&&n<this.thresholdLow){let e=r-(a-1-s);(-1===this.lastValleyIndex||e-this.lastValleyIndex>=this.minPeakDistance)&&i.push({index:e,value:n,time:t[s]})}}if(i.length>=1&&s.length>=1){let e,t,a,r;let l=i[i.length-1],n=s[s.length-1],o=!1;if(l.index<n.index){if(n.index<=this.lastDetectedPeakIndex)return;e=l,t=n,a=Math.abs(n.value-l.value),r=(n.time-l.time)/1e3,o=!0}else if(n.index<l.index){if(l.index<=this.lastDetectedValleyIndex)return;e=n,t=l,a=Math.abs(n.value-l.value),r=(l.time-n.time)/1e3,o=!0}o&&r>=this.minRepDuration&&r<=this.maxRepDuration&&a>=this.minPeakProminence&&(this.completeRep(e,n,t),this.lastDetectedValleyIndex=l.index,this.lastDetectedPeakIndex=n.index,this.lastValleyIndex=l.index,this.lastPeakIndex=n.index,this.lastRepEndTime=t.time)}i.length>0&&0===s.length?(this.inRepPhase=!0,this.state="STARTING"):s.length>0?this.state="LIFTING":(this.inRepPhase=!1,this.state="REST")}completeRep(e,t,a){this.repCount++;let r=(a.time-e.time)/1e3;console.log("✅ REP #".concat(this.repCount," | Duration: ").concat(r.toFixed(2),"s | Range: ").concat(Math.abs(t.value-e.value).toFixed(2)," m/s\xb2")),this.reps.push({repNumber:this.repCount,startTime:e.time,endTime:a.time,duration:r,peakAcceleration:t.value,peakValue:t.value,peakVelocity:t.value/2,valleyValue:e.value,range:Math.abs(t.value-e.value)}),this.repTimes.push(r);for(let e=this.allSamples.length-1;e>=0;e--){let t=this.allSamples[e];if(t.repNumber===this.repCount)t.repNumber=this.repCount;else break}}getAverageRepTime(){return 0===this.repTimes.length?0:this.repTimes.reduce((e,t)=>e+t,0)/this.repTimes.length}getLastRepTime(){return this.repTimes.length>0?this.repTimes[this.repTimes.length-1]:0}getStats(){return{repCount:this.repCount,averageRepTime:this.getAverageRepTime(),lastRepTime:this.getLastRepTime(),state:this.state,thresholdHigh:this.thresholdHigh,thresholdLow:this.thresholdLow,repHeight:this.repHeight,bufferSize:this.accelBuffer.length,windowSize:this.windowSamples}}reset(){this.repCount=0,this.accelBuffer=[],this.timeBuffer=[],this.allSamples=[],this.reps=[],this.currentRep=null,this.lastRepEndTime=0,this.repTimes=[],this.state="IDLE",this.lastPeakIndex=-1,this.lastValleyIndex=-1,this.lastDetectedValleyIndex=-1,this.lastDetectedPeakIndex=-1,this.inRepPhase=!1,this.repStartTime=0}exportData(){return{samples:this.allSamples,reps:this.reps,stats:this.getStats()}}constructor(e={}){this.repCount=0,this.windowDuration=e.windowDuration||1.5,this.windowOverlap=e.windowOverlap||.8,this.samplingRate=e.samplingRate||20,this.windowSamples=Math.floor(this.windowDuration*this.samplingRate),this.stepSize=Math.floor(this.windowSamples*(1-this.windowOverlap)),this.accelBuffer=[],this.timeBuffer=[],this.allSamples=[],this.reps=[],this.currentRep=null,this.lastRepEndTime=0,this.minPeakProminence=e.minPeakProminence||.15,this.minPeakDistance=e.minPeakDistance||15,this.minRepDuration=e.minRepDuration||0,this.maxRepDuration=e.maxRepDuration||12,this.thresholdHigh=10.5,this.thresholdLow=9.5,this.repHeight=0,this.state="IDLE",this.lastPeakIndex=-1,this.lastValleyIndex=-1,this.lastDetectedValleyIndex=-1,this.lastDetectedPeakIndex=-1,this.inRepPhase=!1,this.repTimes=[],this.repStartTime=0}}class f{update(e){this.estimationError+=this.processNoise;let t=this.estimationError/(this.estimationError+this.measurementNoise);return this.value+=t*(e-this.value),this.estimationError=(1-t)*this.estimationError,this.value}reset(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.value=e,this.estimationError=1}constructor(e=.01,t=.5,a=1,r=0){this.processNoise=e,this.measurementNoise=t,this.estimationError=a,this.value=r}}function x(){let e=(0,l.useRouter)(),{equipment:t,workout:a}=e.query,{connected:s,device:o,scanning:x,devicesFound:p,availability:g,scanDevices:b,connectToDevice:w,disconnect:v}=(0,h.E)(),[y,j]=(0,n.useState)(null),[k]=(0,n.useState)(2),[N]=(0,n.useState)(5),{isRecording:S,isPaused:C,showCountdown:R,countdownValue:D,isOnBreak:_,breakTimeRemaining:M,breakPaused:L,motivationalMessage:T,elapsedTime:E,currentSet:P,repStats:I,workoutStats:F,currentIMU:z,sampleCount:B,dataRate:V,timeData:O,rawAccelData:A,filteredAccelData:Y,isSubscribed:H,startRecording:X,stopRecording:W,togglePause:Z,toggleBreakPause:G,stopBreak:U,exportToCSV:q,resetReps:J,formatTime:K,repCounterRef:Q,rawDataLog:$}=function(e){let{connected:t,recommendedReps:a=5,recommendedSets:r=2,onSetComplete:s,onWorkoutComplete:i}=e,[l,o]=(0,n.useState)(!1),[c,d]=(0,n.useState)(!1),[u,x]=(0,n.useState)(!1),[p,g]=(0,n.useState)(3),[b,w]=(0,n.useState)(!1),v=(0,n.useRef)(0),y=(0,n.useRef)([]),j=(0,n.useRef)(!1),k=(0,n.useRef)(!1),N=(0,n.useRef)(!1),[S,C]=(0,n.useState)(!1),[R,D]=(0,n.useState)(30),[_,M]=(0,n.useState)(!1),[L,T]=(0,n.useState)(""),E=(0,n.useRef)(null),[P,I]=(0,n.useState)({totalReps:0,allRepDurations:[],completedSets:0,totalTime:0,setData:[]}),[F,z]=(0,n.useState)(0),B=(0,n.useRef)(null),V=(0,n.useRef)(new m),[O,A]=(0,n.useState)(V.current.getStats()),[Y,H]=(0,n.useState)(1),[X,W]=(0,n.useState)([]),[Z,G]=(0,n.useState)([]),[U,q]=(0,n.useState)([]),J=(0,n.useRef)([]),K=(0,n.useRef)([]),Q=(0,n.useRef)([]),[$,ee]=(0,n.useState)({accelX:0,accelY:0,accelZ:0,gyroX:0,gyroY:0,gyroZ:0,roll:0,pitch:0,yaw:0,rawMagnitude:0,filteredMagnitude:0}),[et,ea]=(0,n.useState)(0),[er,es]=(0,n.useState)(0),ei=(0,n.useRef)(Date.now()),el=(0,n.useRef)(0),{isSubscribed:en,error:eo,resetFilters:ec}=function(e,t){let{device:a,connected:r}=(0,h.E)(),[s,i]=(0,n.useState)(!1),[l,o]=(0,n.useState)(null),c=(0,n.useRef)(null),d=(0,n.useRef)(null),u=(0,n.useRef)({x:new f(.01,.5,1,0),y:new f(.01,.5,1,0),z:new f(.01,.5,1,9.81)}),m=(0,n.useCallback)(t=>{try{let a=t.target.value,r=new DataView(a.buffer),s={accelX:r.getFloat32(0,!0),accelY:r.getFloat32(4,!0),accelZ:r.getFloat32(8,!0),gyroX:r.getFloat32(12,!0),gyroY:r.getFloat32(16,!0),gyroZ:r.getFloat32(20,!0),roll:r.getFloat32(24,!0),pitch:r.getFloat32(28,!0),yaw:r.getFloat32(32,!0),timestamp:r.getUint32(36,!0)},i=Math.sqrt(s.accelX*s.accelX+s.accelY*s.accelY+s.accelZ*s.accelZ),l=u.current,n=l.x.update(s.accelX),o=l.y.update(s.accelY),c=l.z.update(s.accelZ);e&&e({...s,rawMagnitude:i,filteredX:n,filteredY:o,filteredZ:c,filteredMagnitude:Math.sqrt(n*n+o*o+c*c)})}catch(e){console.error("Error parsing IMU data:",e),o(e.message)}},[e]),x=(0,n.useCallback)(e=>{try{let t=e.target.value,a=new DataView(t.buffer),r=a.getUint8(0);for(let e=1;e<=r&&e<t.byteLength;e++)String.fromCharCode(a.getUint8(e))}catch(e){console.error("Error parsing NFC data:",e),o(e.message)}},[null]);return(0,n.useEffect)(()=>{if(!a||!r||!a.gatt){i(!1);return}let e=!0;return async function(){try{o(null);let t=a.gatt;t.connected||await t.connect();let r=await t.getPrimaryService("4fafc201-1fb5-459e-8fcc-c5c9c331914b"),s=await r.getCharacteristic("beb5483e-36e1-4688-b7f5-ea07361b26a8");await s.startNotifications(),s.addEventListener("characteristicvaluechanged",m),c.current=s;try{let e=await r.getCharacteristic("ceb5483e-36e1-4688-b7f5-ea07361b26a8");await e.startNotifications(),e.addEventListener("characteristicvaluechanged",x),d.current=e}catch(e){console.warn("NFC characteristic not available:",e)}e&&i(!0)}catch(t){console.error("Failed to subscribe to characteristics:",t),e&&(o(t.message),i(!1))}}(),()=>{if(e=!1,c.current){try{c.current.removeEventListener("characteristicvaluechanged",m),c.current.stopNotifications()}catch(e){console.error("Error cleaning up IMU characteristic:",e)}c.current=null}if(d.current){try{d.current.removeEventListener("characteristicvaluechanged",x),d.current.stopNotifications()}catch(e){console.error("Error cleaning up NFC characteristic:",e)}d.current=null}}},[a,r,m,x]),{isSubscribed:s,error:l,resetFilters:(0,n.useCallback)(()=>{u.current.x.reset(0),u.current.y.reset(0),u.current.z.reset(9.81)},[])}}((0,n.useCallback)(e=>{ee(e),el.current++;let t=Date.now();if(t-ei.current>=1e3&&(es(el.current),ea(e=>e+el.current),el.current=0,ei.current=t),j.current&&!k.current&&!N.current){0===v.current&&(v.current=e.timestamp);let t=e.timestamp-v.current;y.current.push({timestamp:t,...e});let a=Math.floor(t/1e3),r=t%1e3,s="".concat(a,".").concat(r.toString().padStart(3,"0"));J.current.push(s),K.current.push(e.rawMagnitude),Q.current.push(e.filteredMagnitude),W(e=>{let t=[...e,s];return t.length>100?t.slice(-100):t}),G(t=>{let a=[...t,e.rawMagnitude];return a.length>100?a.slice(-100):a}),q(t=>{let a=[...t,e.filteredMagnitude];return a.length>100?a.slice(-100):a}),V.current.addSample(e.accelX,e.accelY,e.accelZ,e.gyroX,e.gyroY,e.gyroZ,e.roll,e.pitch,e.yaw,e.filteredMagnitude,t),A(V.current.getStats())}},[]),0);(0,n.useEffect)(()=>{j.current=l,k.current=c,N.current=b},[l,c,b]),(0,n.useEffect)(()=>(!l||c||b?B.current&&(clearInterval(B.current),B.current=null):B.current=setInterval(()=>{z(e=>e+1)},1e3),()=>{B.current&&clearInterval(B.current)}),[l,c,b]),(0,n.useEffect)(()=>(S&&!_?E.current=setInterval(()=>{D(e=>e<=1?(eu(),30):e-1)},1e3):E.current&&(clearInterval(E.current),E.current=null),()=>{E.current&&clearInterval(E.current)}),[S,_]),(0,n.useEffect)(()=>{if(l&&!c&&!b&&!S&&O.repCount>=a&&O.repCount>0){let e=V.current.exportData(),t=e.reps.map(e=>e.duration),a=e.reps.map((e,t)=>({time:e.duration,rom:10*e.peakAcceleration,peakVelocity:e.peakVelocity||e.peakAcceleration/2,isClean:e.duration>=2&&e.duration<=4,chartData:Q.current})),l={setNumber:Y,reps:O.repCount,duration:F,repsData:a,chartData:[...Q.current],timeData:[...J.current]};I(e=>({totalReps:e.totalReps+O.repCount,allRepDurations:[...e.allRepDurations,...t],completedSets:e.completedSets+1,totalTime:e.totalTime+F,setData:[...e.setData,l]})),Y>=r?(o(!1),d(!1),i&&i({workoutStats:{...P,totalReps:P.totalReps+O.repCount,totalTime:P.totalTime+F},repData:V.current.exportData(),chartData:{rawAccelData:K.current,filteredAccelData:Q.current,timeData:J.current}})):(ed(),s&&s(Y))}},[O.repCount,a,l,c,b,S,Y,r]);let ed=()=>{let e=["You're doing amazing!","Keep up the great work!","Stay strong, you've got this!","Almost there, keep pushing!","You're crushing it!","Breathe and recover!","Rest up for the next set!","You're making progress!"];T(e[Math.floor(Math.random()*e.length)]),C(!0),d(!0),D(30)},eu=async()=>{let e=document.querySelector(".break-overlay");e&&(e.classList.add("animate-fadeOut"),await new Promise(e=>setTimeout(e,400))),C(!1),M(!1),V.current.reset(),A(V.current.getStats()),H(e=>e+1),W([]),G([]),q([]),J.current=[],K.current=[],Q.current=[],v.current=0,y.current=[],ec(),z(0),await eh()},eh=async()=>{w(!0),N.current=!0,d(!1),k.current=!1,o(!0),j.current=!0,x(!0),g(3);for(let e=3;e>0;e--)g(e),await new Promise(e=>setTimeout(e,1e3));g("GO!"),await new Promise(e=>setTimeout(e,500));let e=document.querySelector(".countdown-overlay");e&&(e.classList.add("animate-fadeOut"),await new Promise(e=>setTimeout(e,400))),x(!1),w(!1),N.current=!1,d(!1),k.current=!1,o(!0),j.current=!0,window.scrollTo({top:0,behavior:"smooth"})},em=async()=>{if(!t||!en){alert("Please connect to your IMU device first!");return}v.current=0,y.current=[],V.current.reset(),ec(),A(V.current.getStats()),W([]),G([]),q([]),J.current=[],K.current=[],Q.current=[],ea(0),z(0),await eh()};return{isRecording:l,isPaused:c,showCountdown:u,countdownValue:p,isOnBreak:S,breakTimeRemaining:R,breakPaused:_,motivationalMessage:L,elapsedTime:F,currentSet:Y,repStats:O,workoutStats:P,currentIMU:$,sampleCount:et,dataRate:er,isSubscribed:en,timeData:X,rawAccelData:Z,filteredAccelData:U,startRecording:em,stopRecording:()=>{o(!1),d(!1),C(!1),H(1),I({totalReps:0,allRepDurations:[],completedSets:0,totalTime:0,setData:[]}),V.current.reset(),A(V.current.getStats())},togglePause:()=>{d(e=>{let t=!e;return k.current=t,t})},toggleBreakPause:()=>{M(e=>!e)},stopBreak:()=>{E.current&&(clearInterval(E.current),E.current=null),D(30),eu()},exportToCSV:()=>{let e=V.current.exportData().samples;if(0===e.length){alert("No data to export!");return}let t="rep,timestamp,timestamp_ms,accelX,accelY,accelZ,accelMag,gyroX,gyroY,gyroZ,roll,pitch,yaw,filteredX,filteredY,filteredZ,filteredMag\n";return e.forEach(e=>{let a=Math.floor(e.timestamp/1e3),r=e.timestamp%1e3,s="".concat(a.toString().padStart(2,"0"),".").concat(r.toString().padStart(3,"0")),i=[e.repNumber,s,e.timestamp,e.accelX.toFixed(4),e.accelY.toFixed(4),e.accelZ.toFixed(4),e.accelMag.toFixed(4),e.gyroX.toFixed(4),e.gyroY.toFixed(4),e.gyroZ.toFixed(4),e.roll.toFixed(2),e.pitch.toFixed(2),e.yaw.toFixed(2),e.accelX.toFixed(4),e.accelY.toFixed(4),e.accelZ.toFixed(4),e.accelMag.toFixed(4)];t+=i.join(",")+"\n"}),t},resetReps:()=>{V.current.reset(),A(V.current.getStats())},formatTime:e=>"".concat(Math.floor(e/60).toString().padStart(2,"0"),":").concat((e%60).toString().padStart(2,"0")),repCounterRef:V,rawDataLog:y}}({connected:s,recommendedReps:N,recommendedSets:k,onWorkoutComplete:r=>{let{workoutStats:s,repData:i,chartData:l}=r,n=s.allRepDurations.length>0?s.allRepDurations.reduce((e,t)=>e+t,0)/s.allRepDurations.length:0,o=q();o&&(sessionStorage.setItem("workoutCSV",o),sessionStorage.setItem("workoutCSVFilename","applift_".concat(a,"_").concat(new Date().toISOString().replace(/[:.]/g,"-"),".csv"))),e.push({pathname:"/workout-finished",query:{workoutName:a,equipment:t,totalReps:s.totalReps,calories:Math.round(5*s.totalReps),totalTime:s.totalTime,avgConcentric:(.4*n).toFixed(1),avgEccentric:(.6*n).toFixed(1),chartData:JSON.stringify(l.filteredAccelData),timeData:JSON.stringify(l.timeData),setsData:JSON.stringify(s.setData),recommendedSets:k,hasCSV:"true"}})}}),ee=()=>{if(W(),$.current.length>0&&confirm("Recorded ".concat(I.repCount," reps with ").concat($.current.length," samples. Download CSV?"))){let e=new Blob([q()],{type:"text/csv"}),t=window.URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download="applift_".concat(a,"_").concat(new Date().toISOString().replace(/[:.]/g,"-"),".csv"),document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(t)}};return(0,r.jsxs)("div",{className:"relative h-screen w-screen bg-black text-white overflow-hidden",children:[(0,r.jsx)(i(),{children:(0,r.jsxs)("title",{children:["Workout Monitor — ",a," — AppLift"]})}),R&&(0,r.jsx)("div",{className:"countdown-overlay fixed inset-0 z-[100] flex items-center justify-center bg-black/90 animate-fadeIn",children:(0,r.jsx)("div",{className:"text-7xl sm:text-8xl md:text-9xl font-bold text-white animate-pulse",children:D})}),_&&(0,r.jsx)("div",{className:"break-overlay fixed inset-0 z-[100] flex items-center justify-center bg-black px-4 animate-fadeIn",children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-8 sm:gap-10",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 sm:mb-4",children:"Take a break!"}),(0,r.jsx)("div",{className:"text-base sm:text-lg md:text-xl text-white/70",children:T})]}),(0,r.jsxs)("div",{className:"relative w-64 h-64 sm:w-80 sm:h-80 md:w-96 md:h-96",children:[(0,r.jsxs)("svg",{className:"w-full h-full transform -rotate-90",viewBox:"0 0 256 256",children:[(0,r.jsx)("circle",{cx:"128",cy:"128",r:"110",stroke:"rgba(255, 255, 255, 0.1)",strokeWidth:"16",fill:"none"}),(0,r.jsx)("circle",{cx:"128",cy:"128",r:"110",stroke:"url(#breakGradient)",strokeWidth:"16",fill:"none",strokeLinecap:"round",strokeDasharray:"".concat(2*Math.PI*110),strokeDashoffset:"".concat(2*Math.PI*110*(1-(30-M)/30)),style:{transition:L?"none":"stroke-dashoffset 1s linear",filter:"drop-shadow(0 0 8px rgba(168, 85, 247, 0.8))"}}),(0,r.jsx)("defs",{children:(0,r.jsxs)("linearGradient",{id:"breakGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,r.jsx)("stop",{offset:"0%",stopColor:M>20?"#e9d5ff":M>10?"#c084fc":"#9333ea"}),(0,r.jsx)("stop",{offset:"50%",stopColor:M>15?"#c084fc":"#a855f7"}),(0,r.jsx)("stop",{offset:"100%",stopColor:M>10?"#a855f7":"#7c3aed"})]})})]}),(0,r.jsx)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:(0,r.jsxs)("div",{className:"text-6xl sm:text-7xl md:text-8xl font-bold text-white",children:[Math.floor(M/60),":",(M%60).toString().padStart(2,"0")]})})]}),(0,r.jsxs)("div",{className:"flex items-center gap-8 sm:gap-12",children:[(0,r.jsxs)("button",{onClick:G,className:"flex flex-col items-center gap-2 transition-all hover:scale-110",children:[(0,r.jsx)("div",{className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-white/10 flex items-center justify-center",children:L?(0,r.jsx)("svg",{className:"w-8 h-8 sm:w-10 sm:h-10 text-white ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{d:"M8 5v14l11-7z"})}):(0,r.jsx)("svg",{className:"w-8 h-8 sm:w-10 sm:h-10 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z"})})}),(0,r.jsx)("span",{className:"text-sm sm:text-base text-white/80",children:L?"Resume":"Pause"})]}),(0,r.jsxs)("button",{onClick:U,className:"flex flex-col items-center gap-2 transition-all hover:scale-110",children:[(0,r.jsx)("div",{className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-white/10 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-7 h-7 sm:w-9 sm:h-9 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("rect",{x:"6",y:"6",width:"12",height:"12",rx:"2"})})}),(0,r.jsx)("span",{className:"text-sm sm:text-base text-white/80",children:"End"})]})]})]})}),(0,r.jsx)(d,{notification:y,onDismiss:()=>j(null)}),(0,r.jsxs)("div",{className:"absolute top-0 left-0 right-0 z-30 px-4 pt-6 pb-4",style:{background:"linear-gradient(to bottom, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0.6) 70%, rgba(0,0,0,0) 100%)"},children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("button",{onClick:()=>e.back(),className:"flex items-center justify-center h-10 w-10 rounded-full hover:bg-white/20 transition-all","aria-label":"Go back",children:(0,r.jsx)("img",{src:"/images/icons/arrow-point-to-left.png",alt:"Back",className:"w-5 h-5 filter brightness-0 invert"})}),(0,r.jsx)(u.Z,{connected:s,device:o,onScan:b,onConnect:w,onDisconnect:v,scanning:x,devicesFound:p,availability:g})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-white mb-1",children:a}),(0,r.jsx)("p",{className:"text-sm text-white/70",children:t})]})]}),(0,r.jsxs)("main",{className:"relative h-full w-full",children:[!s&&S&&(0,r.jsx)("div",{className:"absolute top-32 left-4 right-4 z-30 rounded-xl bg-red-500/20 backdrop-blur-md border border-red-500/50 p-4 text-center animate-pulse",children:(0,r.jsx)("p",{className:"text-sm text-red-300 font-semibold",children:"⚠️ Device disconnected. Please reconnect to continue session."})}),!s&&!S&&(0,r.jsx)("div",{className:"absolute top-32 left-4 right-4 z-30 rounded-xl bg-red-500/20 backdrop-blur-md border border-red-500/50 p-4 text-center",children:(0,r.jsx)("p",{className:"text-sm text-red-300",children:"⚠️ Device not connected. Please connect your IMU device."})}),(0,r.jsx)("div",{className:"absolute inset-0 z-10",children:(0,r.jsx)(c,{timeData:O,filteredData:Y,thresholdHigh:I.thresholdHigh,thresholdLow:I.thresholdLow})})]}),(0,r.jsx)("div",{className:"fixed bottom-0 left-0 right-0 z-40 px-4 pb-6 pt-8",style:{background:"linear-gradient(to top, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.85) 40%, rgba(0,0,0,0.6) 80%, rgba(0,0,0,0) 100%)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)"},children:(0,r.jsx)("div",{className:"mx-auto w-full max-w-lg",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"flex items-center justify-between mb-3",children:S?(0,r.jsx)(r.Fragment,{children:C?(0,r.jsxs)("button",{onClick:Z,className:"w-full py-4 rounded-full font-bold text-white text-xl transition-all flex items-center justify-between px-6",style:{background:"linear-gradient(135deg, #c084fc 0%, #a855f7 50%, #9333ea 100%)",boxShadow:"0 8px 24px rgba(147, 51, 234, 0.4)"},children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-white/20 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{d:"M8 5v14l11-7z"})})}),(0,r.jsx)("span",{children:K(E)}),(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),ee()},className:"w-12 h-12 rounded-full bg-red-500/80 hover:bg-red-500 flex items-center justify-center transition-all",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("rect",{x:"6",y:"6",width:"12",height:"12"})})})]}):(0,r.jsxs)("button",{onClick:Z,className:"w-full py-4 rounded-full font-bold text-white text-xl transition-all flex items-center justify-center gap-3",style:{background:"linear-gradient(135deg, #c084fc 0%, #a855f7 50%, #9333ea 100%)",boxShadow:"0 8px 24px rgba(147, 51, 234, 0.4)"},children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-white/20 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z"})})}),(0,r.jsx)("span",{children:K(E)})]})}):(0,r.jsxs)("button",{onClick:X,disabled:!s||!H,className:"w-full py-4 rounded-full font-bold text-white text-xl transition-all disabled:opacity-50 flex items-center justify-center gap-3",style:{background:"linear-gradient(135deg, #c084fc 0%, #a855f7 50%, #9333ea 100%)",boxShadow:"0 8px 24px rgba(147, 51, 234, 0.4)"},children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-white/20 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{d:"M8 5v14l11-7z"})})}),(0,r.jsx)("span",{children:"Start Recording"})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{className:"rounded-2xl p-4 backdrop-blur-md flex flex-col",style:{background:"rgba(255, 255, 255, 0.08)",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)",aspectRatio:"1.4"},children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)("div",{className:"w-5 h-5 rounded-full bg-yellow-600/30 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-3 h-3 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),(0,r.jsx)("span",{className:"text-base font-semibold text-white/90",children:"Reps"})]}),(0,r.jsxs)("div",{className:"flex items-baseline gap-2 mb-auto",children:[(0,r.jsx)("span",{className:"text-5xl font-extrabold text-white leading-none",children:I.repCount}),(0,r.jsx)("span",{className:"text-2xl font-semibold text-white/40",children:"/"}),(0,r.jsx)("span",{className:"text-3xl font-semibold text-white/40",children:N})]}),(0,r.jsx)("div",{className:"w-full h-2 rounded-full bg-white/10 overflow-hidden mt-2",children:(0,r.jsx)("div",{className:"h-full rounded-full transition-all duration-300 ease-in-out",style:{width:"".concat(Math.min(I.repCount/N*100,100),"%"),background:"linear-gradient(90deg, #EAB308 0%, #CA8A04 50%, #A16207 100%)",boxShadow:"0 0 10px 2px rgba(234, 179, 8, 0.6)"}})})]}),(0,r.jsxs)("div",{className:"rounded-2xl p-2 flex flex-col backdrop-blur-md",style:{background:"rgba(255, 255, 255, 0.08)",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)",aspectRatio:"1.4"},children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)("div",{className:"w-5 h-5 rounded-full bg-blue-500/30 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-3 h-3 text-blue-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,r.jsx)("span",{className:"text-base font-semibold text-white/90",children:"Sets"})]}),(0,r.jsxs)("div",{className:"flex items-baseline gap-2 mb-auto",children:[(0,r.jsx)("span",{className:"text-5xl font-extrabold text-white leading-none",children:P}),(0,r.jsx)("span",{className:"text-2xl font-semibold text-white/40",children:"/"}),(0,r.jsx)("span",{className:"text-3xl font-semibold text-white/40",children:k})]}),(0,r.jsx)("div",{className:"w-full h-2 rounded-full bg-white/10 overflow-hidden mt-2",children:(0,r.jsx)("div",{className:"h-full rounded-full transition-all duration-300 ease-in-out",style:{width:"".concat(Math.min(P/k*100,100),"%"),background:"linear-gradient(90deg, #3b82f6 0%, #2563eb 50%, #1d4ed8 100%)",boxShadow:"0 0 10px 2px rgba(59, 130, 246, 0.6)"}})})]})]})]})})})]})}},5152:function(e,t,a){e.exports=a(2602)}},function(e){e.O(0,[742,888,774,179],function(){return e(e.s=1252)}),_N_E=e.O()}]);